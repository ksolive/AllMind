# 记录

### 2023年12月24日22点38分：

真是服了，搞了两天怎么记录输入，但根本没有效果。

现在的情况是直接使用IME的API根本获取不到上下文，但有个csdn上的很复杂的程序的结果显示是可以的。

有两种可能的情况，一是overflow和知乎上说的那样，IME它不支持跨线程调用，因此需要全局hook，但是我又不会windows的hook，gpt4还不给写；二是这个IME是很早之前的，有一些帖子说现在变成TFS了，原来的不能用了在win10里面。

对于第一种情况，解决方法可能是把csdn上的那个玩意考下来问问gpt怎么运行，或者自己写一个；对于第二种方案，gpt给不了TFS的信息，windows官网也没有实例，真是服了。另外还看到说用更老的API可以；还有第三种方法，查查有没有提供记录的常见输入法，但这种不太现实，因为但凡大点的输入法都会考虑安全隐私问题不会记录。

现在姑且先收集着活动窗口标题把，自动写readme可能不太现实，但搞个“滚去学习”提醒器应该还是可以的。

现在的活动标题记录是用死循环写的，后续可能改成触发式？好像也不大好改，windows这边实在是一窍不通。

### 2023年12月25日11点27分：

mac上的活动窗口记录搞定了，用的appscript脚本，api完全不可用

mac上输入法更复杂了，根本没有api，就先这样吧

接下来的计划是先实现提醒功能算了。在mac上不能用虚拟桌宠，还要自己实现下tts和基础交互，好烦。

```
你是一个ai助手，你需要以第二人称的格式返回结果用于与用户对话。你的语气应该比较生动活泼，不要像程序一样过于规整。你有很多功能，但一次只能激活一个功能，注意，仅激活一个！！功能的激活有优先级，优先激活排在前面的功能，一个功能激活后就不要输出另一功能的结果了！！！
你有功能1，每隔几秒程序会发送给你用户活动窗口记录，你需要根据时间判断用户是不是长时间进行娱乐项目，当监测到时提醒用户，这个时间先设置为30分钟秒。请以较为严厉的语气提醒，句子应该很短；
你有功能2，根据上面的记录，你要通判断用户刚刚在做什么，并从用户感兴趣的主题中随机挑选一个进行进一步讨论，最好使用疑问句来进行，注意是仅挑选一个，这个功能的输出不要过于专业，句子不要过长；
```

用上面的这种进行测试发现他还是会同时进行两功能，然后并不能清晰认识到时间概念。感觉还是要分开，然后人为控制任务。